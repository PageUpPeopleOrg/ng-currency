angular.module("ng-currency",[]).directive("ngCurrency",["$filter","$locale",function(n,r){return{require:"ngModel",scope:{min:"=min",max:"=max",currencySymbol:"@",ngRequired:"=ngRequired",fraction:"=fraction"},link:function(e,t,i,u){function a(n){return RegExp("\\d|\\-|\\"+n,"g")}function c(n){return RegExp("\\-{0,1}((\\"+n+")|([0-9]{1,}\\"+n+"?))&?[0-9]{0,"+s+"}","g")}function o(t){t=String(t);var i=r.NUMBER_FORMATS.DECIMAL_SEP,u=null,o=n("currency")("-1",f(),e.fraction),l=o.indexOf("1"),s=o.substring(0,l);return t=t.replace(s,"-"),RegExp("^-[\\s]*$","g").test(t)&&(t="-0"),a(i).test(t)&&(u=t.match(a(i)).join("").match(c(i)),u=u?u[0].replace(i,"."):null),u}function f(){return angular.isDefined(e.currencySymbol)?e.currencySymbol:r.NUMBER_FORMATS.CURRENCY_SYM}function l(){for(var n=u.$formatters,r=n.length,e=u.$$rawModelValue;r--;)e=n[r](e);u.$setViewValue(e),u.$render()}if("false"!==i.ngCurrency){var s="undefined"!=typeof e.fraction?e.fraction:2;u.$parsers.push(function(n){var r=o(n);return("."==r||"-."==r)&&(r=".0"),parseFloat(r)}),t.on("blur",function(){u.$commitViewValue(),l()}),u.$formatters.unshift(function(r){if("removeSymbol"in i){var r=n("currency")(r,f(),e.fraction);return r.replace(f(),"")}return n("currency")(r,f(),e.fraction)}),u.$validators.min=function(n){return!e.ngRequired&&isNaN(n)?!0:"undefined"!=typeof e.min?n>=parseFloat(e.min):!0},u.$validators.max=function(n){return!e.ngRequired&&isNaN(n)?!0:"undefined"!=typeof e.max?n<=parseFloat(e.max):!0},u.$validators.fraction=function(n){return n&&isNaN(n)?!1:!0}}}}}]);